<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YKS Tracker | 2026</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;600;900&family=Playfair+Display:ital,wght@1,600&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #000000;
  --glass: rgba(255, 255, 255, 0.05);
  --glass-heavy: rgba(255, 255, 255, 0.12);
  --glass-stroke: rgba(255, 255, 255, 0.18);
  --text: #ffffff;
  --muted: #8e8e93;
}

@keyframes logoPulse {
  0% { opacity: 0.8; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.02); }
  100% { opacity: 0.8; transform: scale(1); }
}

* { box-sizing: border-box; -webkit-font-smoothing: antialiased; }

body {
  margin: 0; font-family: 'SF Pro Display', sans-serif;
  background: radial-gradient(circle at 50% -20%, #2c2c2e 0%, #000000 85%);
  color: var(--text); height: 100vh; overflow: hidden;
}

header {
  padding: 22px 60px; display: flex; justify-content: space-between; align-items: center;
  background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(60px); border-bottom: 1px solid var(--glass-stroke);
}

.logo-area { display: flex; align-items: baseline; gap: 12px; cursor: pointer; animation: logoPulse 3s infinite ease-in-out; }
.logo { font-weight: 900; font-size: 24px; letter-spacing: -1px; }
.signature { font-family: 'Playfair Display', serif; font-style: italic; font-size: 14px; color: var(--muted); }

.header-links { display: flex; gap: 15px; }
.btn-link {
  color: #fff; text-decoration: none; font-size: 13px; font-weight: 600;
  padding: 12px 28px; border-radius: 60px; border: 1px solid var(--glass-stroke);
  background: var(--glass); transition: 0.5s cubic-bezier(0.16, 1, 0.3, 1);
}
.btn-link:hover { background: #fff; color: #000; transform: scale(1.08); }

main { display: grid; grid-template-columns: 400px 1fr; height: calc(100vh - 84px); }

.left { padding: 30px; border-right: 1px solid var(--glass-stroke); overflow-y: auto; display: flex; flex-direction: column; }
.left::-webkit-scrollbar { width: 4px; }
.left::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }

.custom-select-wrapper { position: relative; margin-bottom: 35px; }
.select-trigger {
  width: 100%; background: var(--glass-heavy); border: 1px solid var(--glass-stroke);
  color: #fff; padding: 18px; border-radius: 40px; cursor: pointer;
  text-align: center; font-weight: 600; transition: 0.3s;
}
.select-options {
  position: absolute; top: calc(100% + 12px); left: 0; right: 0;
  background: rgba(25, 25, 25, 0.98); backdrop-filter: blur(40px);
  border: 1px solid var(--glass-stroke); border-radius: 30px;
  display: none; z-index: 2000; overflow: hidden;
  box-shadow: 0 20px 40px rgba(0,0,0,0.8);
}
.select-options div { padding: 15px; text-align: center; cursor: pointer; transition: 0.2s; color: #ccc; }
.select-options div:hover { background: var(--glass-heavy); color: #fff; }

.row {
  display: flex; justify-content: space-between; align-items: center;
  padding: 20px 30px; background: var(--glass); border: 1px solid var(--glass-stroke);
  border-radius: 50px; margin-bottom: 15px; cursor: pointer; transition: 0.3s;
}
input {
  width: 80px; background: rgba(255,255,255,0.08); border: 1px solid var(--glass-stroke);
  color: #fff; padding: 10px; border-radius: 25px; text-align: center; font-weight: 800; outline: none;
}

.heatmap-container { margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--glass-stroke); }
.heatmap-title { font-size: 10px; color: var(--muted); font-weight: 800; margin-bottom: 12px; letter-spacing: 1px; }
.heatmap { display: flex; flex-wrap: wrap; gap: 4px; padding: 15px; background: var(--glass); border-radius: 20px; border: 1px solid var(--glass-stroke); }
.heat-box { width: 12px; height: 12px; border-radius: 3px; background: rgba(255,255,255,0.05); }

.right { padding: 40px; display: flex; flex-direction: column; gap: 30px; overflow-y: auto; }

.stat-pill {
  padding: 12px 20px; border-radius: 60px; font-size: 11px;
  background: var(--glass); border: 1px solid var(--glass-stroke);
  color: var(--muted); text-transform: uppercase;
}
.stat-pill b { color: #fff; font-weight: 800; margin-left: 4px; }

.chart-section {
  background: var(--glass); padding: 30px; border-radius: 50px;
  border: 1px solid var(--glass-stroke); height: 360px;
}

.bottom-section { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
.card {
  background: var(--glass); padding: 35px; border-radius: 55px;
  border: 1px solid var(--glass-stroke);
  display: flex; flex-direction: column; justify-content: flex-start; align-items: center;
  text-align: center; height: 260px;
}

.label-title { font-size:12px; opacity:0.5; font-weight:800; letter-spacing:2px; margin-top: 10px; margin-bottom: 25px; }
.timerDisplay { font-size: 52px; font-weight: 600; letter-spacing: -3px; margin-bottom: 20px; }
.countdownDisplay { font-size: 38px; font-weight: 600; letter-spacing: -2px; margin-bottom: 20px; color: #fff; }

button {
  background: var(--glass-heavy); border: 1px solid var(--glass-stroke); color: #fff; 
  padding: 14px 32px; border-radius: 60px; cursor: pointer; font-weight: 800; transition: 0.4s;
}
button:hover { background: #fff; color: #000; transform: translateY(-2px); }
button.active-view { background: #fff; color: #000; }

.modal {
  position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(50px);
  display: none; align-items: center; justify-content: center; z-index: 3000;
}
.modalBox { width: 500px; background: rgba(20,20,20,0.9); border-radius: 60px; border: 1px solid var(--glass-stroke); padding: 50px; }
textarea { width: 100%; height: 160px; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-stroke); color: #fff; padding: 25px; margin: 30px 0; border-radius: 35px; outline: none; resize: none; font-size: 16px; }
</style>
</head>

<body>

<header>
  <div class="logo-area" onclick="openHelp()">
    <div class="logo">YKS TRACKER</div>
    <div class="signature">by bosgezenyan</div>
  </div>
  <div class="header-links">
    <a href="https://www.youtube.com/feed/courses" target="_blank" class="btn-link">Eyüp B</a>
    <a href="https://prnt.sc/g9zisNogj6bU" target="_blank" class="btn-link">Motivasyon</a>
  </div>
</header>

<main>
  <div class="left">
    <div class="custom-select-wrapper">
      <div class="select-trigger" id="listMonthBtn" onclick="event.stopPropagation(); toggleSelect('listOptions')">Şubat 2026</div>
      <div class="select-options" id="listOptions"></div>
    </div>
    <div id="log" style="flex: 1;"></div>
    
    <div class="heatmap-container">
        <div class="heatmap-title">ÇALIŞMA YOĞUNLUĞU</div>
        <div class="heatmap" id="heatmap"></div>
    </div>
  </div>

  <div class="right">
    <div style="display:flex; justify-content: space-between; align-items: center;">
        <div style="display:flex; gap:10px; align-items: center;">
            <div class="custom-select-wrapper" style="width:220px; margin-bottom:0;">
                <div class="select-trigger" id="chartMonthBtn" onclick="event.stopPropagation(); toggleSelect('chartOptions')">Şubat 2026</div>
                <div class="select-options" id="chartOptions"></div>
            </div>
            <button id="genelBakisBtn" style="height:55px; width:220px; border-radius:40px;" onclick="setView('all')">Genel Bakış</button>
        </div>
        <div id="stats" style="display:flex; gap:10px;"></div>
    </div>

    <div class="chart-section">
      <canvas id="chart"></canvas>
    </div>

    <div class="bottom-section">
      <div class="card">
        <div class="label-title">KRONOMETRE</div>
        <div class="timerDisplay" id="timerDisplay">00:00:00</div>
        <div style="display:flex; gap:5px; height: 48px;">
          <button id="timerStartBtn" onclick="startTimer()">Başlat</button>
          <button style="margin-left: 8px;" onclick="stopTimer()">Durdur</button>
          <button style="margin-left: 8px;" onclick="resetTimer()">Sıfırla</button>
        </div>
      </div>

      <div class="card">
        <div class="label-title">SINAVA KALAN</div>
        <div class="countdownDisplay" id="countdown">00G 00S 00D 00S</div>
        <div style="display:flex; align-items: flex-end; height: 48px;">
            <div style="font-size:12px; opacity:0.4; font-weight: 800; letter-spacing: 1px; line-height: 1; margin-bottom: 0px; padding-bottom: 4px;">20 HAZİRAN 2026</div>
        </div>
      </div>
    </div>
  </div>
</main>

<div class="modal" id="helpModal" onclick="this.style.display='none'">
  <div class="modalBox" onclick="event.stopPropagation()">
    <h2 style="text-align:center; margin-bottom:20px;">Sistem Rehberi</h2>
    <div style="font-size: 14px; line-height: 1.6; color: #ccc;">
        <p><b>Hızlı Not:</b> Günlerin üzerine basıp notunu yazdıktan sonra <b>ESC</b> tuşuna basarak anında kaydedebilirsin.</p>
        <p><b>Grafik Mantığı:</b> Çizgi rengi performansa göredir. Artış varsa <b style="color:#34c759">Yeşil</b>, düşüş varsa <b style="color:#ff3b30">Kırmızı</b> yanar.</p>
        <p><b>Kesin Kural:</b> Çalışmadığın günleri mutlaka <b>0</b> olarak gir.</p>
        <hr style="border:0; border-top:1px solid #333; margin:20px 0;">
        <p style="text-align:center;">
          <a href="https://github.com/Bosgezenyan" target="_blank" style="color:#34c759; text-decoration:none; font-weight:bold;">github.com/Bosgezenyan</a>
        </p>
    </div>
    <button onclick="document.getElementById('helpModal').style.display='none'" style="width:100%; margin-top:20px; background:#fff; color:#000;">Anlıyorum!</button>
  </div>
</div>

<div class="modal" id="modal" onclick="closeModal()">
  <div class="modalBox" onclick="event.stopPropagation()">
    <h3 id="modalDate" style="margin:0; text-align:center; font-size:24px;"></h3>
    <textarea id="noteBox" placeholder="Neler çalıştın?"></textarea>
    <button onclick="closeModal()" style="width:100%; padding:20px; background:#fff; color:#000;">Kaydet ve Kapat</button>
  </div>
</div>

<script>
const startDate = new Date("2026-01-31");
const endDate = new Date("2026-06-20");
const daysCount = Math.floor((endDate - startDate) / (1000 * 60 * 60 * 24));
let data = JSON.parse(localStorage.getItem("yksData")) || {};
let currentListMonth = "Şubat 2026";
let currentChartMonth = "Şubat 2026";
let viewMode = "month";

const allMonths = ["Ocak 2026", "Şubat 2026", "Mart 2026", "Nisan 2026", "Mayıs 2026", "Haziran 2026"];

function setupSelects() {
    const listCont = document.getElementById('listOptions');
    const chartCont = document.getElementById('chartOptions');
    allMonths.forEach(m => {
        let d1 = document.createElement('div'); d1.textContent = m;
        d1.onclick = () => { currentListMonth = m; document.getElementById('listMonthBtn').textContent = m; renderList(); renderHeatmap(); };
        listCont.appendChild(d1);
        let d2 = document.createElement('div'); d2.textContent = m;
        d2.onclick = () => { viewMode = "month"; currentChartMonth = m; document.getElementById('chartMonthBtn').textContent = m; document.getElementById('genelBakisBtn').classList.remove('active-view'); updateChart(); };
        chartCont.appendChild(d2);
    });
}

function renderHeatmap() {
    const container = document.getElementById('heatmap'); container.innerHTML = "";
    for(let i=0; i<daysCount; i++) {
        let d = new Date(startDate); d.setDate(startDate.getDate() + i);
        if (d.toLocaleDateString("tr-TR", { month:"long", year:"numeric" }) !== currentListMonth) continue;
        let key = d.toISOString().slice(0,10);
        let mins = parseTimeToMins(data[key]?.time) || 0;
        let box = document.createElement('div'); box.className = 'heat-box';
        if(mins > 0) box.style.background = `rgba(52, 199, 89, ${Math.min(mins/480, 1)})`;
        container.appendChild(box);
    }
}

function openHelp() { document.getElementById('helpModal').style.display = 'flex'; }
function toggleSelect(id) {
    const el = document.getElementById(id);
    const isVisible = el.style.display === 'block';
    document.querySelectorAll('.select-options').forEach(opt => opt.style.display = 'none');
    el.style.display = isVisible ? 'none' : 'block';
}

function parseTimeToMins(val) {
    if (!val) return null;
    let s = val.toString().replace(',', '.');
    let parts = s.split(".");
    return (parseInt(parts[0]) || 0) * 60 + (parseInt(parts[1]) || 0);
}

function minsToSaDak(mins) {
    if (mins === null) return "0 saat 0 dakika";
    return `${Math.floor(mins/60)} saat ${mins%60} dakika`;
}

function renderList() {
    const log = document.getElementById("log"); log.innerHTML = "";
    for (let i = 0; i < daysCount; i++) {
        let d = new Date(startDate); d.setDate(startDate.getDate() + i);
        if (d.toLocaleDateString("tr-TR", { month:"long", year:"numeric" }) !== currentListMonth) continue;
        let key = d.toISOString().slice(0,10);
        let row = document.createElement("div"); row.className = "row";
        row.onclick = (e) => { if (e.target.tagName !== 'INPUT') openModal(key, d.toLocaleDateString("tr-TR", {day:"numeric", month:"long"})); };
        row.innerHTML = `<div>${d.toLocaleDateString("tr-TR", {day:"numeric", month:"long"})}</div><input placeholder="0.00" value="${data[key]?.time || ""}" oninput="save('${key}', this.value)" onclick="event.stopPropagation()">`;
        log.appendChild(row);
    }
}

function save(key, val) {
    data[key] = data[key] || {}; data[key].time = val;
    localStorage.setItem("yksData", JSON.stringify(data));
    updateChart(); renderHeatmap();
}

let chart;
function updateChart() {
    let labels = [], values = [], fullDates = [];
    for (let i = 0; i < daysCount; i++) {
        let d = new Date(startDate); d.setDate(startDate.getDate() + i);
        let mLabel = d.toLocaleDateString("tr-TR", { month:"long", year:"numeric" });
        if (viewMode === "month" && mLabel !== currentChartMonth) continue;
        if (viewMode === "all" && mLabel === "Ocak 2026") continue;
        let key = d.toISOString().slice(0,10);
        let mins = parseTimeToMins(data[key]?.time);
        if (mins !== null) {
            labels.push(d.getDate());
            values.push(mins);
            fullDates.push(d.toLocaleDateString("tr-TR", {day: "numeric", month: "long"}));
        }
    }
    if (chart) chart.destroy();
    chart = new Chart(document.getElementById("chart"), {
        type: "line",
        data: {
            labels,
            datasets: [{
                data: values,
                segment: { borderColor: (ctx) => (values[ctx.p1DataIndex] >= values[ctx.p0DataIndex]) ? '#34c759' : '#ff3b30' },
                borderWidth: 4, tension: 0.4, pointRadius: 4, pointBackgroundColor: "#fff", fill: false
            }]
        },
        options: {
            responsive: true, maintainAspectRatio: false,
            plugins: { 
                legend: { display: false },
                tooltip: {
                    enabled: true,
                    displayColors: false, // O kareyi kaldırır
                    backgroundColor: 'rgba(25, 25, 25, 0.95)',
                    titleColor: '#8e8e93',
                    titleFont: { size: 11 },
                    bodyColor: '#fff',
                    bodyFont: { size: 13, weight: 'bold' },
                    padding: 12,
                    cornerRadius: 15,
                    callbacks: {
                        title: (items) => fullDates[items[0].dataIndex], // Gün ve ay yazar (5 Şubat gibi)
                        label: (ctx) => `Çalışılan Saat: ${minsToSaDak(ctx.raw)}` // Saat dakika formatı
                    }
                }
            },
            scales: {
                y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.05)' }, 
                     ticks: { stepSize: 60, callback: (v) => v/60 }
                },
                x: { grid: { display: false }, ticks: { color: '#8e8e93' } } 
            }
        }
    });
    updateStats();
}

function updateStats() {
    let mins = Object.values(data).map(d => parseTimeToMins(d.time)).filter(m => m !== null);
    let total = mins.reduce((a,b)=>a+b, 0), avg = mins.length ? Math.round(total / mins.length) : 0, record = mins.length ? Math.max(...mins) : 0;
    const f = (m) => `${Math.floor(m/60)}sa ${m%60}dk`;
    document.getElementById("stats").innerHTML = `<div class="stat-pill">Toplam: <b>${f(total)}</b></div><div class="stat-pill">Ortalama: <b>${f(avg)}</b></div><div class="stat-pill">Rekor: <b>${f(record)}</b></div>`;
}

function setView(mode) { 
    viewMode = mode; 
    if(mode === 'all') document.getElementById('genelBakisBtn').classList.add('active-view');
    updateChart(); 
}

let timerInt, sec = 0;
function startTimer() { if(!timerInt) timerInt = setInterval(() => { sec++; let h=Math.floor(sec/3600), m=Math.floor((sec%3600)/60), s=sec%60; document.getElementById("timerDisplay").textContent=`${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`; }, 1000); }
function stopTimer() { clearInterval(timerInt); timerInt = null; }
function resetTimer() { stopTimer(); sec = 0; document.getElementById("timerDisplay").textContent="00:00:00"; }

function updateCountdown() {
    const target = new Date("June 20, 2026 10:15:00").getTime();
    setInterval(() => {
        const diff = target - new Date().getTime();
        let d = Math.floor(diff/86400000), h = Math.floor((diff%86400000)/3600000), m = Math.floor((diff%3600000)/60000), s = Math.floor((diff%60000)/1000);
        document.getElementById("countdown").innerHTML = `${d}G ${h}S ${m}D ${s}S`;
    }, 1000);
}

let currentKey = null;
function openModal(key, label) { currentKey = key; document.getElementById("modal").style.display = "flex"; document.getElementById("modalDate").textContent = label; document.getElementById("noteBox").value = data[key]?.note || ""; document.getElementById("noteBox").focus(); }
function closeModal() { if(currentKey) { data[currentKey] = data[currentKey] || {}; data[currentKey].note = document.getElementById("noteBox").value; localStorage.setItem("yksData", JSON.stringify(data)); } document.getElementById("modal").style.display = "none"; document.getElementById('helpModal').style.display='none'; }

window.onkeydown = (e) => { if (e.key === "Escape") closeModal(); }
window.onclick = (e) => { if (!e.target.matches('.select-trigger')) document.querySelectorAll('.select-options').forEach(o => o.style.display = 'none'); }

setupSelects(); renderList(); updateChart(); updateCountdown(); renderHeatmap();
</script>
</body>
</html>